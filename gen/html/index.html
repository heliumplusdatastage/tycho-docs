

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tycho &mdash; Tycho 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> Tycho
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Tycho</a></li>
<li><a class="reference internal" href="#goals">Goals</a></li>
<li><a class="reference internal" href="#design">Design</a></li>
<li><a class="reference internal" href="#install">Install</a></li>
<li><a class="reference internal" href="#scenarios">Scenarios</a><ul>
<li><a class="reference internal" href="#development-environment-next-to-minikube">1. Development Environment Next to Minikube</a></li>
<li><a class="reference internal" href="#development-environment-within-minikube">2. Development Environment Within Minikube</a></li>
<li><a class="reference internal" href="#within-gke-from-the-google-cloud-shell">3. Within GKE from the Google Cloud Shell</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-line-interface">Command Line Interface</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Tycho</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Tycho</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="figure align-default">
<img alt="../../img/logo.png" src="../../img/logo.png" />
</div>
<div class="section" id="tycho">
<h1>Tycho<a class="headerlink" href="#tycho" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>Tycho is an API, compiler, and executor for cloud native distributed systems.</p>
<blockquote>
<div><ul class="simple">
<li><p>A subset of docker-compose is the system specification syntax.</p></li>
<li><p>Kubernetes is the first supported orchestrator.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="goals">
<h1>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul>
<li><p><strong>Application Simplity</strong>: The Kubernetes API is reliable, extensive, and well documented. It is also large, complex, supports a range of possibilities greater than many applications need, and often requires the creation and control of many objects to execute comparatively simple scenarios. Tycho bridges the simplicity of Compose to the richness of the Kubernetes’ architecture.</p></li>
<li><p><strong>Microservice</strong>: We wanted an end to end Python 12-factory style OpenAPI microservice that fits seamlessly into a Python ecosystem (which is why we did not use the excellent Kompose tool as a starting point).</p></li>
<li><p><strong>Lifecycle Management</strong>: Tycho treats distributed systems as programs whose entire lifecycle can be programmatically managed via an API.</p></li>
<li><p><strong>Pluggable Orchestrators</strong>: The Tycho compiler abstracts clients from the orchestrator. It creates an abstract syntax tree to model input systems and generates orchestrator specific artifacts.</p></li>
<li><p><strong>Policy</strong>: Tycho now generates network policy configurations governing the ingress and egress of traffic to systems. We anticipate generalizing the policy layer to allow security and other concerns to be woven into a deployment dynamically.</p>
<p><a class="reference external" href="https://github.com/heliumplusdatastage/tycho">GitHub</a></p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>The application programming interface (API) is an OpenAPI endpoint. It includes start, status, and delete operations. Start takes a docker-compose system specification, environment settings, and service metadata as input. It parses these into an abstract syntax tree representing a distributed system. It then calls an orchestrator specific back end to generate and execute the system on a compute bakcplane. This process incorporates policy configurations to control elements like network access and isolation. Status returns information about executing systems. Delete remoes all generated artifacts from the compute cluster.</p>
</div></blockquote>
<div class="figure align-center" id="id1">
<img alt="../../img/design.png" src="../../img/design.png" />
<p class="caption"><span class="caption-text">Tycho architecture.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="install">
<h1>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h1>
<ul>
<li><p>Install and start minikube</p></li>
<li><p>Install python 3.7.x or greater.</p></li>
<li><p>Create a virtual environment.</p></li>
<li><p>Install the requirements.</p></li>
<li><p>Start the server.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>python3 -m venv environmentName
source environmentName/bin/activate
pip install -r requirements.txt
export PATH=&lt;tycho-repo-dir&gt;/bin:$PATH
tycho api --debug
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="scenarios">
<h1>Scenarios<a class="headerlink" href="#scenarios" title="Permalink to this headline">¶</a></h1>
<div class="section" id="development-environment-next-to-minikube">
<h2>1. Development Environment Next to Minikube<a class="headerlink" href="#development-environment-next-to-minikube" title="Permalink to this headline">¶</a></h2>
<p>The API can be run next to Minikube. In this mode, it locates the K8S configuration based on the environment. Systems will be created in Minikube based on that configuration. This is the only practical mode for development. Running with the debug flag gives lots of feedback on what the server is doing and what errors it encounters.</p>
</div>
<div class="section" id="development-environment-within-minikube">
<h2>2. Development Environment Within Minikube<a class="headerlink" href="#development-environment-within-minikube" title="Permalink to this headline">¶</a></h2>
<p>In the repos kubernetes directory, we define deployment, pod, service, clusterrole, and clusterrolebinding models for Tycho. The following interaction shows deploying Tycho into Minikube and interacting with the API. If you just plan to use Tycho but don’t plan to do any development, this is a good option.</p>
<p>Deploy all Kubernetes Tycho-api artifacts into Minkube:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(tycho) [scox@mac~/dev/tycho/tycho]$ kubectl create -f ../kubernetes/
deployment.extensions/tycho-api created
pod/tycho-api created
clusterrole.rbac.authorization.k8s.io/tycho-api-access created
clusterrolebinding.rbac.authorization.k8s.io/tycho-api-access created
service/tycho-api created
</pre></div>
</div>
</div>
<div class="section" id="within-gke-from-the-google-cloud-shell">
<h2>3. Within GKE from the Google Cloud Shell<a class="headerlink" href="#within-gke-from-the-google-cloud-shell" title="Permalink to this headline">¶</a></h2>
<p>Tycho can be used in Google Kubernetes Engine (GKE). Install the Kubernetes artifacts from the gcloud SDK or shell as above.</p>
<p>Once applications are deployed with Tycho, the load balancer service will provision an public IP address for the service. To use this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ lb_ip=$(kubectl get svc tycho-api -o json | jq .status.loadBalancer.ingress[0].ip | sed -e s,\&quot;,,g)
$ tycho_port=$(kubectl get service tycho-api --output json | jq .spec.ports[0].port)
</pre></div>
</div>
</div>
</div>
<div class="section" id="command-line-interface">
<h1>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>You can use Tycho from the command line to interact with the cluster.</p>
<p>Add the CLI tool to your path (if youve cloned the <a class="reference external" href="https://github.com/heliumplusdatastage/tycho">repo</a>) with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PATH=&lt;repo&gt;/bin:$PATH
</pre></div>
</div>
<p>Given this docker-compose.yaml:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="c1"># Docker compose formatted system.</span>
<span class="n">version</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span>
<span class="n">services</span><span class="p">:</span>
  <span class="n">jupyter</span><span class="o">-</span><span class="n">datascience</span><span class="p">:</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">jupyter</span><span class="o">/</span><span class="n">datascience</span><span class="o">-</span><span class="n">notebook</span>
    <span class="n">entrypoint</span><span class="p">:</span> <span class="n">start</span><span class="o">.</span><span class="n">sh</span> <span class="n">jupyter</span> <span class="n">lab</span> <span class="o">--</span><span class="n">LabApp</span><span class="o">.</span><span class="n">token</span><span class="o">=</span>
    <span class="n">ports</span><span class="p">:</span>
      <span class="o">-</span> <span class="mi">8888</span><span class="p">:</span><span class="mi">8888</span>
</pre></div>
</div>
<p>Deploy it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tycho up -f docker-compose.yaml
</pre></div>
</div>
<p>Check its status with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tycho status
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tycho status -terse
</pre></div>
</div>
<p>After a few moments, test the service with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkip=$(minikube ip)
$ wget --quiet -O- http://$mkip:$(tycho status | grep jupyter | grep -v PORT | awk &#39;{ print $4 }&#39;) | grep &quot;/title&quot;
</pre></div>
</div>
<p>And delete the service with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tycho down &lt;GUID&gt;
</pre></div>
</div>
<p>or delete all running services with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tycho down $(tycho status -terse)
</pre></div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Steve Cox

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>